# PolitiekPraat API .htaccess
# Dit bestand zorgt voor betere URL routing en beveiliging

# Zorg ervoor dat PHP bestanden direct uitgevoerd kunnen worden
<Files "*.php">
    Require all granted
</Files>

# Stel juiste MIME types in
AddType application/json .json

# CORS headers voor API requests
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
    Header always set Access-Control-Max-Age "86400"
</IfModule>

# Handle OPTIONS requests voor CORS preflight
RewriteEngine On
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=200,L]

# Beveiliging: Verberg server informatie
ServerTokens Prod
ServerSignature Off

# Beveiliging: Voorkom directory listing
Options -Indexes

# Beveiliging: Voorkom toegang tot gevoelige bestanden
<Files "*.log">
    Require all denied
</Files>

<Files ".htaccess">
    Require all denied
</Files>

<Files "config.php">
    Require all denied
</Files>

# Rate limiting (optioneel - vereist mod_ratelimit)
# <IfModule mod_ratelimit.c>
#     <Location "/api/">
#         SetOutputFilter RATE_LIMIT
#         SetEnv rate-limit 400
#     </Location>
# </IfModule>

# Compressie voor JSON responses
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE text/plain
</IfModule>

# Cache headers voor API responses
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType application/json "access plus 0 seconds"
    ExpiresByType text/plain "access plus 0 seconds"
</IfModule> 